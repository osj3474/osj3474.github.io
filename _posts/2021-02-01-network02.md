---
title: \[Network\] 그만 방문해주세요 - ARP테이블
excerpt: "네트워크 두번째 이야기"
categories:
  - network
---

<br>

두번 째는, ARP테이블 입니다.

<br>

# 배경 설정

나는 집에서 친구랑 신나게 통화를 하고 있었다. 그런데, 초인종이 울렸다. 그래서 친구에게 `잠깐만 기다려봐, 밖에 누가 왔나봐` 하고 현관문에서 `누구세요?` 라고 했다. 알고보니 다른 사람의 택배가 우리 집에 와서 `이 집이 아니다` 라고 했다. 

다시 친구랑 전화를 하고 있는데, 또 초인종이 울렸다. `아 누구지? 기다려봐` 라고 하고 현관문에 가서 `누구세요?` 했더니 또 다른 사람의 택배였다. `끙,,,;;`



위와 같은 상황을 만회하기 위해서 나온 것이 **ARP테이블**인데, ARP부터 살펴 봅시다.

<br>



# ARP (Address Resolution Protocol)

 데이터를 전달하기 위해서는 **IP주소**를 브로드 캐스트 해서 **MAC주소**를 찾는 **ARP**가 꼭 필요합니다. 

1. 제가 특정 호스트에 데이터를 전송하고 싶다고 하겠습니다. (편의상 <a>www.naver.com</a> 이라고 하겠습니다.) 
2. DNS서버로 부터  <a>www.naver.com</a>  의 IP주소를 얻어옵니다.
3.  <a>www.naver.com</a> 의 IP주소를 브로드 캐스트(하나의 송신자가 불특정 다수에게 트래픽을 전송) 합니다. 
4.  <a>www.naver.com</a></a>  를 제외한 다른 다수의 사람들은 제가 보낸 request에 대해 여기가 아니라고 말을 해줘야 합니다. ( <a>www.naver.com</a>  만 본인의 MAC주소를 응답해줍니다.)
5. 데이터 전송을 완료합니다.



그런데 만약 제가   <a>www.naver.com</a>  를 10번 들어갈 때마다 브로드캐스트를 해서 MAC주소를 얻어낸다면, 주변에 있는 사람들은 위의 택배 상황과 동일해질 것입니다. NO~~~!!!





<br>

# ARP 캐시 테이블

방문 했던 곳의 IP주소와 MAC주소의 대응 관계를 저장한 테이블입니다.

```shell
arp -a
```

명령어로 저장된 정보를 확인할 수 있습니다. 이 정보는 컴퓨터를 껐다가 키면 모두 사라집니다.





![image](https://user-images.githubusercontent.com/42775225/106461696-76932380-64d8-11eb-868c-bd36c8cb0e89.png)



지금은 어디로 패킷을 보낸 적이 없기 때문에 아무런 정보도 없습니다.



네트워크 상황이 다음과 같다고 한다면,

![image](https://user-images.githubusercontent.com/42775225/106463334-a2170d80-64da-11eb-96f6-31ad03451fbb.png)



![image](https://user-images.githubusercontent.com/42775225/106464645-42b9fd00-64dc-11eb-8a84-44621e6b74f5.png)

그런데 2번의 경우, 추가가 되었는데 `192.168.5.10` 이 아닌, `192.168.1.254` 이네요! 어떻게 된 것일까요?



다음 포스트에,, 

<br><br><br>